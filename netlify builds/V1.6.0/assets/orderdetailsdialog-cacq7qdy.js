const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/driversStore-BZVn2IjE.js","assets/index-yWCqtgWP.js","assets/index-_TloBQIx.css"])))=>i.map(i=>d[i]);
var pe=Object.defineProperty,be=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var de=(r,d,a)=>d in r?pe(r,d,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[d]=a,k=(r,d)=>{for(var a in d||(d={}))oe.call(d,a)&&de(r,a,d[a]);if($)for(var a of $(d))ie.call(d,a)&&de(r,a,d[a]);return r},D=(r,d)=>be(r,ve(d));var W=(r,d)=>{var a={};for(var c in r)oe.call(r,c)&&d.indexOf(c)<0&&(a[c]=r[c]);if(r!=null&&$)for(var c of $(r))d.indexOf(c)<0&&ie.call(r,c)&&(a[c]=r[c]);return a};var C=(r,d,a)=>new Promise((c,N)=>{var u=s=>{try{f(a.next(s))}catch(w){N(w)}},h=s=>{try{f(a.throw(s))}catch(w){N(w)}},f=s=>s.done?c(s.value):Promise.resolve(s.value).then(u,h);f((a=a.apply(r,d)).next())});import{c as I,r as T,j as e,P as Ne,k as fe,l as ye,I as O,d as S,a as je,b as ke,L as v,B,U as we,e as _e,h as De,_ as Se,i as q,u as K,o as Fe}from"./index-yWCqtgWP.js";import{D as Oe,b as Te,c as Ce,d as Me}from"./dialog-DJKQQ3Aj.js";import{S as H,a as R,b as V,c as U,d as F}from"./select-CrCA7bkJ.js";import{C as Ee}from"./RoleBasedComponent-Bw7TjrVH.js";import{C as Ae}from"./calculator-EU8dGyxE.js";import{P as Ie,W as Pe}from"./weight-C_CrPdNh.js";import{C as $e}from"./calendar-SSTEyxcS.js";import{C as Be,P as He}from"./phone-BxJRnI92.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ve=I("building",Re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ir=I("eye",Ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],We=I("file-check",Le);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ke=I("map-pin",qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ye=I("wrench",ze);var Ze="Separator",le="horizontal",Ge=["horizontal","vertical"],me=T.forwardRef((r,d)=>{const s=r,{decorative:a,orientation:c=le}=s,N=W(s,["decorative","orientation"]),u=Je(c)?c:le,f=a?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return e.jsx(Ne.div,D(k(k({"data-orientation":u},f),N),{ref:d}))});me.displayName=Ze;function Je(r){return Ge.includes(r)}var ce=me;const A=fe.forwardRef((u,N)=>{var h=u,{className:r,orientation:d="horizontal",decorative:a=!0}=h,c=W(h,["className","orientation","decorative"]);return e.jsx(ce,k({ref:N,decorative:a,orientation:d,className:ye("shrink-0 bg-border",d==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r)},c))});A.displayName=ce.displayName;function Qe({id:r,name:d,value:a,onChange:c,placeholder:N="0.0",className:u=""}){const[h,f]=T.useState(null),s=a.startsWith("="),w=g=>{try{const l=g.substring(1).trim();if(!/^[0-9+\-*/.() ]+$/.test(l))return null;if(l.includes("+"))return l.split("+").reduce((y,p)=>y+parseFloat(p.trim()),0);if(l.includes("*"))return l.split("*").reduce((y,p)=>y*parseFloat(p.trim()),1);if(l.includes("/")){const x=l.split("/");let y=parseFloat(x[0].trim());for(let p=1;p<x.length;p++)y/=parseFloat(x[p].trim());return y}if(l.includes("-")){const x=l.split("-");let y=parseFloat(x[0].trim());for(let p=1;p<x.length;p++)y-=parseFloat(x[p].trim());return y}return parseFloat(l)}catch(l){return null}},E=g=>{f(null),c(g)},_=()=>{if(s&&a.startsWith("=")){const g=w(a);g!==null?(c(g.toString()),f(null)):f("Invalid")}},L=g=>{g.key==="Enter"&&_(),g.key==="="&&!a.startsWith("=")&&(g.preventDefault(),c("="))};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(O,{id:r,name:d,value:a,onChange:g=>E(g.target.value),onBlur:_,onKeyDown:L,placeholder:N,className:`${u} ${s?"border-blue-500":""} ${h?"border-red-500":""}`}),s&&e.jsx(Ae,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-blue-500"})]}),s&&a.length>1&&!h&&e.jsx(S,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Calculator mode"}),h&&e.jsx(S,{variant:"outline",className:"text-xs bg-red-50 text-red-700",children:h})]})}function lr({order:r,open:d,onOpenChange:a,readOnly:c=!1}){var z;const[N,u]=T.useState(!1),[h,f]=T.useState(!1),[s,w]=T.useState({deliveryNumber:"",deliveryName:"",company:"",site:"",driverName:"",phoneNumber:"",status:"in-progress",tons:"",shift:"morning",signedDeliveryNote:!1,orderType:"straight-bar",orderDate:new Date().toISOString().split("T")[0],breakdown:{"8mm":"","10mm":"","12mm":"","14mm":"","16mm":"","18mm":"","20mm":"","25mm":"","32mm":""}}),{user:E}=je(),{toast:_}=ke(),L=(z=E==null?void 0:E.profile)==null?void 0:z.role,g=De(L,"edit")&&!c,l=r&&("customer_name"in r||"delivery_number"in r||"driver_name"in r||"phone_number"in r||"signed_delivery_note"in r||"order_type"in r),[x,y]=T.useState([]);T.useEffect(()=>{d&&N&&C(null,null,function*(){try{const{useDriversStore:n}=yield Se(()=>C(null,null,function*(){const{useDriversStore:M}=yield import("./driversStore-BZVn2IjE.js");return{useDriversStore:M}}),__vite__mapDeps([0,1,2])),{loadDrivers:o,getActiveDrivers:i}=n.getState();yield o();const j=i();y(j)}catch(n){console.error("Failed to load drivers:",n),y([])}})},[d,N]),T.useEffect(()=>{var t,n,o,i,j,M,P,Y,Z,G,J,Q,X,ee,re,se,te,ae,ne;if(r){const m=l?{id:r.id,customerName:r.customer_name,date:r.date,status:r.status,amount:r.amount,tons:r.tons,shift:r.shift,deliveryNumber:r.delivery_number||r.id,company:r.company,site:r.site,driverName:r.driver_name,phoneNumber:r.phone_number,deliveredAt:r.delivered_at,signedDeliveryNote:r.signed_delivery_note,orderType:r.order_type,breakdown:{"8mm":Number(r.breakdown_8mm)||0,"10mm":Number(r.breakdown_10mm)||0,"12mm":Number(r.breakdown_12mm)||0,"14mm":Number(r.breakdown_14mm)||0,"16mm":Number(r.breakdown_16mm)||0,"18mm":Number(r.breakdown_18mm)||0,"20mm":Number(r.breakdown_20mm)||0,"25mm":Number(r.breakdown_25mm)||0,"32mm":Number(r.breakdown_32mm)||0}}:r;w({deliveryNumber:m.deliveryNumber||m.id,deliveryName:m.customerName||"",company:m.company||"",site:m.site||"",driverName:m.driverName||"",phoneNumber:m.phoneNumber||"",status:m.status==="delivered"?"delivered":m.status,tons:((t=m.tons)==null?void 0:t.toString())||"",shift:m.shift||"morning",signedDeliveryNote:m.signedDeliveryNote||!1,orderType:m.orderType||"straight-bar",orderDate:m.date||new Date().toISOString().split("T")[0],breakdown:{"8mm":((o=(n=m.breakdown)==null?void 0:n["8mm"])==null?void 0:o.toString())||"0","10mm":((j=(i=m.breakdown)==null?void 0:i["10mm"])==null?void 0:j.toString())||"0","12mm":((P=(M=m.breakdown)==null?void 0:M["12mm"])==null?void 0:P.toString())||"0","14mm":((Z=(Y=m.breakdown)==null?void 0:Y["14mm"])==null?void 0:Z.toString())||"0","16mm":((J=(G=m.breakdown)==null?void 0:G["16mm"])==null?void 0:J.toString())||"0","18mm":((X=(Q=m.breakdown)==null?void 0:Q["18mm"])==null?void 0:X.toString())||"0","20mm":((re=(ee=m.breakdown)==null?void 0:ee["20mm"])==null?void 0:re.toString())||"0","25mm":((te=(se=m.breakdown)==null?void 0:se["25mm"])==null?void 0:te.toString())||"0","32mm":((ne=(ae=m.breakdown)==null?void 0:ae["32mm"])==null?void 0:ne.toString())||"0"}}),u(!1)}},[r,l]);const p=t=>{switch(t){case"completed":return e.jsx(S,{className:"bg-success text-success-foreground",children:"Completed"});case"in-progress":return e.jsx(S,{className:"bg-tertiary text-tertiary-foreground",children:"In Progress"});case"delayed":return e.jsx(S,{className:"bg-warning text-warning-foreground",children:"Delayed"});case"pending":return e.jsx(S,{className:"bg-gray-400 text-white",children:"Pending"});case"delivered":return e.jsx(S,{className:"bg-green-600 text-white",children:"Delivered"});default:return e.jsx(S,{className:"bg-gray-400 text-white",children:t})}},ue=t=>e.jsx(S,{className:t==="morning"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800",children:t==="morning"?"Morning Shift":"Night Shift"}),he=(t,n)=>{const o=t||n;return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:t?"2-digit":void 0,minute:t?"2-digit":void 0}):""},b=(t,n)=>{w(o=>D(k({},o),{[t]:n}))},ge=(t,n)=>{w(j=>D(k({},j),{breakdown:D(k({},j.breakdown),{[t]:n})}));const o=D(k({},s.breakdown),{[t]:n}),i=Object.values(o).reduce((j,M)=>{const P=parseFloat(M)||0;return j+P},0);i>0&&w(j=>D(k({},j),{tons:i.toFixed(2)}))},xe=t=>C(null,null,function*(){if(t.preventDefault(),!r){_({title:"Error",description:"No order data available",variant:"destructive"});return}f(!0);try{const n=Number(s.tons);if(l){console.log("ðŸ“ Dialog: Handling HISTORY order update for:",r.id);const o=D(k({},r),{customer_name:s.deliveryName,status:s.status,delivery_number:s.deliveryNumber,company:s.company,site:s.site,driver_name:s.driverName,phone_number:s.phoneNumber,tons:n,shift:s.shift,amount:n*100,signed_delivery_note:s.signedDeliveryNote,order_type:s.orderType,date:s.orderDate,breakdown_8mm:parseFloat(s.breakdown["8mm"])||0,breakdown_10mm:parseFloat(s.breakdown["10mm"])||0,breakdown_12mm:parseFloat(s.breakdown["12mm"])||0,breakdown_14mm:parseFloat(s.breakdown["14mm"])||0,breakdown_16mm:parseFloat(s.breakdown["16mm"])||0,breakdown_18mm:parseFloat(s.breakdown["18mm"])||0,breakdown_20mm:parseFloat(s.breakdown["20mm"])||0,breakdown_25mm:parseFloat(s.breakdown["25mm"])||0,breakdown_32mm:parseFloat(s.breakdown["32mm"])||0});if(s.status==="in-progress"){console.log("ðŸ“¤ Dialog: Moving history order to active orders"),yield q.moveOrderToActive(r),_({title:"Order Moved",description:`Order ${r.id} has been moved back to active orders.`}),u(!1),a(!1),setTimeout(()=>C(null,null,function*(){const i=K.getState();i.loadOrders&&(yield i.loadOrders()),i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500);return}else console.log("ðŸ“ Dialog: Updating history order in place"),yield q.update(r.id,o),_({title:"Order Updated",description:`Order ${r.id} has been successfully updated.`}),setTimeout(()=>C(null,null,function*(){const i=K.getState();i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500)}else{console.log("ðŸ“ Dialog: Handling ACTIVE order update for:",r.id);const o=D(k({},r),{customerName:s.deliveryName,status:s.status,deliveryNumber:s.deliveryNumber,company:s.company,site:s.site,driverName:s.driverName,phoneNumber:s.phoneNumber,tons:n,shift:s.shift,amount:n*100,signedDeliveryNote:s.signedDeliveryNote,orderType:s.orderType,date:s.orderDate,breakdown:{"8mm":parseFloat(s.breakdown["8mm"])||0,"10mm":parseFloat(s.breakdown["10mm"])||0,"12mm":parseFloat(s.breakdown["12mm"])||0,"14mm":parseFloat(s.breakdown["14mm"])||0,"16mm":parseFloat(s.breakdown["16mm"])||0,"18mm":parseFloat(s.breakdown["18mm"])||0,"20mm":parseFloat(s.breakdown["20mm"])||0,"25mm":parseFloat(s.breakdown["25mm"])||0,"32mm":parseFloat(s.breakdown["32mm"])||0}});if(s.status==="delivered")console.log("ðŸ“¤ Dialog: Active order marked as delivered, moving to history"),yield q.moveOrderToHistory(o),_({title:"Order Delivered",description:`Order ${r.id} has been marked as delivered and moved to history.`});else{console.log("ðŸ“ Dialog: Updating active order in place");const i={customer_name:s.deliveryName,delivery_number:s.deliveryNumber,company:s.company,site:s.site,driver_name:s.driverName,phone_number:s.phoneNumber,tons:n,shift:s.shift,amount:n*100,signed_delivery_note:s.signedDeliveryNote,order_type:s.orderType,date:s.orderDate,breakdown_8mm:parseFloat(s.breakdown["8mm"])||0,breakdown_10mm:parseFloat(s.breakdown["10mm"])||0,breakdown_12mm:parseFloat(s.breakdown["12mm"])||0,breakdown_14mm:parseFloat(s.breakdown["14mm"])||0,breakdown_16mm:parseFloat(s.breakdown["16mm"])||0,breakdown_18mm:parseFloat(s.breakdown["18mm"])||0,breakdown_20mm:parseFloat(s.breakdown["20mm"])||0,breakdown_25mm:parseFloat(s.breakdown["25mm"])||0,breakdown_32mm:parseFloat(s.breakdown["32mm"])||0};yield Fe.update(r.id,i),_({title:"Order Updated",description:`Order ${r.id} has been successfully updated.`})}setTimeout(()=>C(null,null,function*(){const i=K.getState();i.loadOrders&&(yield i.loadOrders()),s.status==="delivered"&&i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500)}u(!1)}catch(n){console.error("âŒ Dialog: Failed to update order:",n);const o=n instanceof Error?n.message:"Failed to update order. Please try again.";_({title:"Error",description:o,variant:"destructive"})}finally{f(!1)}});return r?e.jsx(Oe,{open:d,onOpenChange:a,children:e.jsxs(Te,{className:"sm:max-w-[700px] bg-background text-foreground max-h-[90vh] overflow-y-auto","aria-describedby":"order-details-description",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Me,{className:"text-foreground",children:["Order Details - ",l?r.delivery_number||r.id:r.deliveryNumber||r.id]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p(r.status),ue(r.shift)]})]})}),e.jsx("div",{id:"order-details-description",className:"sr-only",children:"View and edit order information, steel breakdown, and delivery details."}),N?e.jsxs("form",{onSubmit:xe,className:"space-y-6",id:"edit-order-form",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-deliveryNumber",className:"text-foreground",children:"Delivery Number *"}),e.jsx(O,{id:"edit-deliveryNumber",name:"deliveryNumber",value:s.deliveryNumber,onChange:t=>b("deliveryNumber",t.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-deliveryName",className:"text-foreground",children:"Delivery Name *"}),e.jsx(O,{id:"edit-deliveryName",name:"deliveryName",value:s.deliveryName,onChange:t=>b("deliveryName",t.target.value),className:"bg-background text-foreground border-border"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-company",className:"text-foreground",children:"Company *"}),e.jsx(O,{id:"edit-company",name:"company",value:s.company,onChange:t=>b("company",t.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-site",className:"text-foreground",children:"Site *"}),e.jsx(O,{id:"edit-site",name:"site",value:s.site,onChange:t=>b("site",t.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-driverName",className:"text-foreground",children:"Driver Name"}),e.jsxs(H,{name:"driverName",value:s.driverName||"none",onValueChange:t=>{if(b("driverName",t==="none"?"":t),t!=="none"&&Array.isArray(x)){const o=x.find(i=>i&&i.name===t);o&&o.phone_number&&b("phoneNumber",o.phone_number)}},children:[e.jsx(R,{id:"edit-driverName",className:"bg-background text-foreground border-border",children:e.jsx(V,{placeholder:"Select driver (optional)"})}),e.jsxs(U,{className:"bg-popover text-popover-foreground",children:[e.jsx(F,{value:"none",children:"No driver assigned"}),Array.isArray(x)&&x.map(t=>t&&t.id&&t.name?e.jsx(F,{value:t.name,children:t.name},t.id):null)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-phoneNumber",className:"text-foreground",children:"Phone Number"}),e.jsx(O,{id:"edit-phoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:t=>b("phoneNumber",t.target.value),placeholder:"+1 (555) 123-4567",className:"bg-background text-foreground border-border"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-order-date",className:"text-foreground",children:"Order Date *"}),e.jsx(O,{id:"edit-order-date",name:"orderDate",type:"date",value:s.orderDate,onChange:t=>b("orderDate",t.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-tons",className:"text-foreground",children:"Total Tons *"}),e.jsx(O,{id:"edit-tons",name:"tons",type:"number",step:"0.1",value:s.tons,onChange:t=>b("tons",t.target.value),placeholder:"12.5",className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-shift",className:"text-foreground",children:"Shift"}),e.jsxs(H,{name:"shift",value:s.shift,onValueChange:t=>b("shift",t),children:[e.jsx(R,{id:"edit-shift",className:"bg-background text-foreground border-border",children:e.jsx(V,{placeholder:"Select shift"})}),e.jsxs(U,{className:"bg-popover text-popover-foreground",children:[e.jsx(F,{value:"morning",children:"Morning Shift"}),e.jsx(F,{value:"night",children:"Night Shift"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-orderType",className:"text-foreground",children:"Order Type *"}),e.jsxs(H,{name:"orderType",value:s.orderType,onValueChange:t=>b("orderType",t),children:[e.jsx(R,{id:"edit-orderType",className:"bg-background text-foreground border-border",children:e.jsx(V,{placeholder:"Select order type"})}),e.jsxs(U,{className:"bg-popover text-popover-foreground",children:[e.jsx(F,{value:"straight-bar",children:"Straight Bar"}),e.jsx(F,{value:"cut-and-bend",children:"Cut and Bend"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-status",className:"text-foreground",children:"Order Status"}),e.jsxs(H,{name:"status",value:s.status,onValueChange:t=>{console.log("ðŸ“Š Status change:",s.status,"â†’",t),b("status",t)},children:[e.jsx(R,{id:"edit-status",className:"bg-background text-foreground border-border",children:e.jsx(V,{placeholder:"Select status"})}),e.jsxs(U,{className:"bg-popover text-popover-foreground",children:[e.jsx(F,{value:"in-progress",children:"In Progress"}),e.jsx(F,{value:"delivered",children:"Delivered"})]})]}),l&&s.status==="in-progress"&&e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:"âš ï¸ This will move the order back to today's active orders"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"edit-signedDeliveryNote",checked:s.signedDeliveryNote,onCheckedChange:t=>b("signedDeliveryNote",t)}),e.jsx(v,{htmlFor:"edit-signedDeliveryNote",className:"text-foreground",children:"Signed Delivery Note Received"})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Steel Breakdown (Tons)"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",Object.values(s.breakdown).reduce((t,n)=>{const o=parseFloat(n)||0;return t+o},0).toFixed(2)," tons"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(s.breakdown).map(([t,n])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{htmlFor:`edit-breakdown-${t}`,className:"text-xs text-foreground",children:t}),e.jsx(Qe,{id:`edit-breakdown-${t}`,name:`edit-breakdown-${t}`,value:n,onChange:o=>ge(t,o),placeholder:"0.0 or =10+5",className:"bg-background text-foreground border-border text-sm h-8",step:"0.1"})]},t))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(B,{type:"button",variant:"outline",disabled:h,onClick:()=>u(!1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsx(B,{type:"submit",disabled:h,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md",children:h?"Processing...":l&&s.status==="in-progress"?"Move to Active Orders":"Update Order"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Number"}),e.jsx("p",{className:"font-medium text-foreground",children:l?r.delivery_number||r.id:r.deliveryNumber||r.id})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r.status==="delivered"?"Delivered Date":"Order Date"}),e.jsx("p",{className:"font-medium text-foreground",children:he(r.deliveredAt||r.delivered_at,r.date)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Weight"}),e.jsxs("p",{className:"font-medium text-foreground",children:[r.tons," tons"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Shift"}),e.jsx("p",{className:"font-medium text-foreground",children:r.shift==="morning"?"Morning Shift":"Night Shift"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ye,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Type"}),e.jsx("p",{className:"font-medium text-foreground",children:(l?r.order_type:r.orderType)==="cut-and-bend"?"Cut and Bend":"Straight Bar"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Note"}),e.jsx("p",{className:"font-medium text-foreground",children:(l?r.signed_delivery_note:r.signedDeliveryNote)?e.jsx("span",{className:"text-success",children:"âœ“ Signed"}):e.jsx("span",{className:"text-muted-foreground",children:"Not Signed"})})]})]})]})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Name"}),e.jsx("p",{className:"font-medium text-foreground",children:l?r.customer_name:r.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Company"}),e.jsx("p",{className:"font-medium text-foreground",children:r.company||"N/A"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Site"}),e.jsx("p",{className:"font-medium text-foreground",children:r.site||"N/A"})]})]})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Steel Breakdown"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["8mm","10mm","12mm","14mm","16mm","18mm","20mm","25mm","32mm"].map(t=>{var o;let n=0;return l?n=Number(r[`breakdown_${t}`])||0:n=((o=r.breakdown)==null?void 0:o[t])||0,e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:t}),e.jsx("span",{className:"text-sm text-muted-foreground",children:n>0?`${n} tons`:"0 tons"})]},t)})})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Driver Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Driver Name"}),e.jsx("p",{className:"font-medium text-foreground",children:l?r.driver_name||"N/A":r.driverName||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"}),e.jsx("div",{className:"font-medium",children:(()=>{const t=l?r.phone_number:r.phoneNumber;return t?e.jsx("a",{href:`tel:${t.replace(/[\s\-\(\)]/g,"")}`,className:"text-primary hover:text-primary/80 underline cursor-pointer",title:"Click to call",children:t}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})})()})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(B,{variant:"outline",onClick:()=>a(!1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"Close"}),g&&e.jsx(B,{onClick:()=>u(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Edit Order"})]})]})]})}):null}export{Qe as C,ir as E,lr as O,A as S};
