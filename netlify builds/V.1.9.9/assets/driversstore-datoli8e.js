const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BFnQ-UAH.js","assets/index-BIO773XR.css"])))=>i.map(i=>d[i]);
var w=Object.defineProperty,y=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var _=(a,o,r)=>o in a?w(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r,m=(a,o)=>{for(var r in o||(o={}))D.call(o,r)&&_(a,r,o[r]);if(u)for(var r of u(o))f.call(o,r)&&_(a,r,o[r]);return a},h=(a,o)=>y(a,g(o));var s=(a,o,r)=>new Promise((i,e)=>{var t=d=>{try{n(r.next(d))}catch(v){e(v)}},c=d=>{try{n(r.throw(d))}catch(v){e(v)}},n=d=>d.done?i(d.value):Promise.resolve(d.value).then(t,c);n((r=r.apply(a,o)).next())});import{af as p,_ as l}from"./index-BFnQ-UAH.js";const F=p((a,o)=>({drivers:[],metrics:[],loading:!1,error:null,searchQuery:"",setSearchQuery:r=>a({searchQuery:r}),loadDrivers:()=>s(null,null,function*(){a({loading:!0,error:null});try{const{driverService:r}=yield l(()=>s(null,null,function*(){const{driverService:e}=yield import("./index-BFnQ-UAH.js").then(t=>t.ag);return{driverService:e}}),__vite__mapDeps([0,1])),i=yield r.getAll();a({drivers:i,loading:!1})}catch(r){console.error("Failed to load drivers:",r),a({drivers:[],error:r instanceof Error?r.message:"Failed to load drivers",loading:!1})}}),loadMetrics:()=>s(null,null,function*(){try{const{driverService:r}=yield l(()=>s(null,null,function*(){const{driverService:e}=yield import("./index-BFnQ-UAH.js").then(t=>t.ag);return{driverService:e}}),__vite__mapDeps([0,1])),i=yield r.getMetrics();a({metrics:i})}catch(r){console.error("Failed to load driver metrics:",r),a({metrics:[],error:r instanceof Error?r.message:"Failed to load metrics"})}}),addDriver:r=>s(null,null,function*(){a({loading:!0,error:null});try{const{driverService:i}=yield l(()=>s(null,null,function*(){const{driverService:t}=yield import("./index-BFnQ-UAH.js").then(c=>c.ag);return{driverService:t}}),__vite__mapDeps([0,1])),e=yield i.create(r);a(t=>({drivers:[e,...t.drivers],loading:!1})),o().loadMetrics()}catch(i){throw console.error("Failed to add driver:",i),a({error:i instanceof Error?i.message:"Failed to create driver",loading:!1}),i}}),updateDriver:(r,i)=>s(null,null,function*(){try{const{driverService:e}=yield l(()=>s(null,null,function*(){const{driverService:c}=yield import("./index-BFnQ-UAH.js").then(n=>n.ag);return{driverService:c}}),__vite__mapDeps([0,1])),t=yield e.update(r,i);a(c=>({drivers:c.drivers.map(n=>n.id===r?t:n),metrics:c.metrics.map(n=>n&&n.driver_id===r?h(m({},n),{driver_name:t.name,phone_number:t.phone_number,is_active:t.is_active}):n),error:null}))}catch(e){throw console.error("Failed to update driver:",e),a({error:e instanceof Error?e.message:"Failed to update driver"}),e}}),deleteDriver:r=>s(null,null,function*(){try{const{driverService:i}=yield l(()=>s(null,null,function*(){const{driverService:e}=yield import("./index-BFnQ-UAH.js").then(t=>t.ag);return{driverService:e}}),__vite__mapDeps([0,1]));yield i.delete(r),a(e=>({drivers:e.drivers.filter(t=>t.id!==r),metrics:e.metrics.filter(t=>t.driver_id!==r)}))}catch(i){throw a({error:i instanceof Error?i.message:"Failed to delete driver"}),i}}),getActiveDrivers:()=>o().drivers.filter(r=>r.is_active),getFilteredDrivers:()=>{const{drivers:r,searchQuery:i}=o();if(!i.trim())return r;const e=i.toLowerCase();return r.filter(t=>t.name.toLowerCase().includes(e)||t.phone_number.toLowerCase().includes(e))},getCurrentCycleDates:()=>{try{const r=new Date,i=r.getDate(),e=r.getMonth(),t=r.getFullYear();let c,n;return i>=25?(c=new Date(t,e,25),n=new Date(t,e+1,24)):(c=new Date(t,e-1,25),n=new Date(t,e,24)),{start:c.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}}catch(r){return console.error("Error calculating cycle dates:",r),{start:"N/A",end:"N/A"}}}}));export{F as useDriversStore};
