const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/driversStore-CtgkP15o.js","assets/index-DrtJc57V.js","assets/index-BbPQ_6WP.css"])))=>i.map(i=>d[i]);
var pe=Object.defineProperty,be=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var se=(r,n,o)=>n in r?pe(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o,p=(r,n)=>{for(var o in n||(n={}))te.call(n,o)&&se(r,o,n[o]);if(A)for(var o of A(n))de.call(n,o)&&se(r,o,n[o]);return r},N=(r,n)=>be(r,ve(n));var R=(r,n)=>{var o={};for(var l in r)te.call(r,l)&&n.indexOf(l)<0&&(o[l]=r[l]);if(r!=null&&A)for(var l of A(r))n.indexOf(l)<0&&de.call(r,l)&&(o[l]=r[l]);return o};var k=(r,n,o)=>new Promise((l,b)=>{var g=a=>{try{f(o.next(a))}catch(y){b(y)}},v=a=>{try{f(o.throw(a))}catch(y){b(y)}},f=a=>a.done?l(a.value):Promise.resolve(a.value).then(g,v);f((o=o.apply(r,n)).next())});import{c as T,r as D,j as e,P as Ne,k as fe,l as ye,a as je,b as ke,L as h,I as w,B as E,U as we,e as _e,h as De,_ as Se,d as _,i as V,u as U,o as Fe}from"./index-DrtJc57V.js";import{D as Oe,b as Te,c as Ce,d as Me}from"./dialog-b53tw_S6.js";import{S as I,a as P,b as $,c as B,d as j}from"./select-Ckbz379H.js";import{C as Ae}from"./RoleBasedComponent-VZo09JCK.js";import{C as Ee}from"./CalculatorInput-BNKdttAW.js";import{P as Ie,W as Pe}from"./weight-hWzbXMLY.js";import{C as $e}from"./calendar-CePNJWhY.js";import{C as Be,P as He}from"./phone-8MZzO7QX.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ve=T("building",Re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nr=T("eye",Ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],We=T("file-check",Le);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ze=T("map-pin",qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ze=T("wrench",Ye);var Ge="Separator",oe="horizontal",Je=["horizontal","vertical"],ne=D.forwardRef((r,n)=>{const a=r,{decorative:o,orientation:l=oe}=a,b=R(a,["decorative","orientation"]),g=Ke(l)?l:oe,f=o?{role:"none"}:{"aria-orientation":g==="vertical"?g:void 0,role:"separator"};return e.jsx(Ne.div,N(p(p({"data-orientation":g},f),b),{ref:n}))});ne.displayName=Ge;function Ke(r){return Je.includes(r)}var ie=ne;const O=fe.forwardRef((g,b)=>{var v=g,{className:r,orientation:n="horizontal",decorative:o=!0}=v,l=R(v,["className","orientation","decorative"]);return e.jsx(ie,p({ref:b,decorative:o,orientation:n,className:ye("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r)},l))});O.displayName=ie.displayName;function ir({order:r,open:n,onOpenChange:o,readOnly:l=!1}){var W;const[b,g]=D.useState(!1),[v,f]=D.useState(!1),[a,y]=D.useState({deliveryNumber:"",deliveryName:"",company:"",site:"",driverName:"",phoneNumber:"",status:"in-progress",tons:"",shift:"morning",signedDeliveryNote:!1,orderType:"straight-bar",orderDate:new Date().toISOString().split("T")[0],breakdown:{"8mm":"","10mm":"","12mm":"","14mm":"","16mm":"","18mm":"","20mm":"","25mm":"","32mm":""}}),{user:H}=je(),{toast:S}=ke(),me=(W=H==null?void 0:H.profile)==null?void 0:W.role,le=De(me,"edit")&&!l,c=r&&("customer_name"in r||"delivery_number"in r||"driver_name"in r||"phone_number"in r||"signed_delivery_note"in r||"order_type"in r),[C,L]=D.useState([]);D.useEffect(()=>{n&&b&&k(null,null,function*(){try{const{useDriversStore:t}=yield Se(()=>k(null,null,function*(){const{useDriversStore:F}=yield import("./driversStore-CtgkP15o.js");return{useDriversStore:F}}),__vite__mapDeps([0,1,2])),{loadDrivers:d,getActiveDrivers:i}=t.getState();yield d();const x=i();L(x)}catch(t){console.error("Failed to load drivers:",t),L([])}})},[n,b]),D.useEffect(()=>{var s,t,d,i,x,F,M,q,z,Y,Z,G,J,K,Q,X,ee,re,ae;if(r){const m=c?{id:r.id,customerName:r.customer_name,date:r.date,status:r.status,amount:r.amount,tons:r.tons,shift:r.shift,deliveryNumber:r.delivery_number||r.id,company:r.company,site:r.site,driverName:r.driver_name,phoneNumber:r.phone_number,deliveredAt:r.delivered_at,signedDeliveryNote:r.signed_delivery_note,orderType:r.order_type,breakdown:{"8mm":Number(r.breakdown_8mm)||0,"10mm":Number(r.breakdown_10mm)||0,"12mm":Number(r.breakdown_12mm)||0,"14mm":Number(r.breakdown_14mm)||0,"16mm":Number(r.breakdown_16mm)||0,"18mm":Number(r.breakdown_18mm)||0,"20mm":Number(r.breakdown_20mm)||0,"25mm":Number(r.breakdown_25mm)||0,"32mm":Number(r.breakdown_32mm)||0}}:r;y({deliveryNumber:m.deliveryNumber||m.id,deliveryName:m.customerName||"",company:m.company||"",site:m.site||"",driverName:m.driverName||"",phoneNumber:m.phoneNumber||"",status:m.status==="delivered"?"delivered":m.status,tons:((s=m.tons)==null?void 0:s.toString())||"",shift:m.shift||"morning",signedDeliveryNote:m.signedDeliveryNote||!1,orderType:m.orderType||"straight-bar",orderDate:m.date||new Date().toISOString().split("T")[0],breakdown:{"8mm":((d=(t=m.breakdown)==null?void 0:t["8mm"])==null?void 0:d.toString())||"0","10mm":((x=(i=m.breakdown)==null?void 0:i["10mm"])==null?void 0:x.toString())||"0","12mm":((M=(F=m.breakdown)==null?void 0:F["12mm"])==null?void 0:M.toString())||"0","14mm":((z=(q=m.breakdown)==null?void 0:q["14mm"])==null?void 0:z.toString())||"0","16mm":((Z=(Y=m.breakdown)==null?void 0:Y["16mm"])==null?void 0:Z.toString())||"0","18mm":((J=(G=m.breakdown)==null?void 0:G["18mm"])==null?void 0:J.toString())||"0","20mm":((Q=(K=m.breakdown)==null?void 0:K["20mm"])==null?void 0:Q.toString())||"0","25mm":((ee=(X=m.breakdown)==null?void 0:X["25mm"])==null?void 0:ee.toString())||"0","32mm":((ae=(re=m.breakdown)==null?void 0:re["32mm"])==null?void 0:ae.toString())||"0"}}),g(!1)}},[r,c]);const ce=s=>{switch(s){case"completed":return e.jsx(_,{className:"bg-success text-success-foreground",children:"Completed"});case"in-progress":return e.jsx(_,{className:"bg-tertiary text-tertiary-foreground",children:"In Progress"});case"delayed":return e.jsx(_,{className:"bg-warning text-warning-foreground",children:"Delayed"});case"pending":return e.jsx(_,{className:"bg-gray-400 text-white",children:"Pending"});case"delivered":return e.jsx(_,{className:"bg-green-600 text-white",children:"Delivered"});default:return e.jsx(_,{className:"bg-gray-400 text-white",children:s})}},ue=s=>e.jsx(_,{className:s==="morning"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800",children:s==="morning"?"Morning Shift":"Night Shift"}),he=(s,t)=>{const d=s||t;return d?new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:s?"2-digit":void 0,minute:s?"2-digit":void 0}):""},u=(s,t)=>{y(d=>N(p({},d),{[s]:t}))},ge=(s,t)=>{y(x=>N(p({},x),{breakdown:N(p({},x.breakdown),{[s]:t})}));const d=N(p({},a.breakdown),{[s]:t}),i=Object.values(d).reduce((x,F)=>{const M=parseFloat(F)||0;return x+M},0);i>0&&y(x=>N(p({},x),{tons:i.toFixed(2)}))},xe=s=>k(null,null,function*(){if(s.preventDefault(),!r){S({title:"Error",description:"No order data available",variant:"destructive"});return}f(!0);try{const t=Number(a.tons);if(c){console.log("ðŸ“ Dialog: Handling HISTORY order update for:",r.id);const d=N(p({},r),{customer_name:a.deliveryName,status:a.status,delivery_number:a.deliveryNumber,company:a.company,site:a.site,driver_name:a.driverName,phone_number:a.phoneNumber,tons:t,shift:a.shift,amount:t*100,signed_delivery_note:a.signedDeliveryNote,order_type:a.orderType,date:a.orderDate,breakdown_8mm:parseFloat(a.breakdown["8mm"])||0,breakdown_10mm:parseFloat(a.breakdown["10mm"])||0,breakdown_12mm:parseFloat(a.breakdown["12mm"])||0,breakdown_14mm:parseFloat(a.breakdown["14mm"])||0,breakdown_16mm:parseFloat(a.breakdown["16mm"])||0,breakdown_18mm:parseFloat(a.breakdown["18mm"])||0,breakdown_20mm:parseFloat(a.breakdown["20mm"])||0,breakdown_25mm:parseFloat(a.breakdown["25mm"])||0,breakdown_32mm:parseFloat(a.breakdown["32mm"])||0});if(a.status==="in-progress"){console.log("ðŸ“¤ Dialog: Moving history order to active orders"),yield V.moveOrderToActive(r),S({title:"Order Moved",description:`Order ${r.id} has been moved back to active orders.`}),g(!1),o(!1),setTimeout(()=>k(null,null,function*(){const i=U.getState();i.loadOrders&&(yield i.loadOrders()),i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500);return}else console.log("ðŸ“ Dialog: Updating history order in place"),yield V.update(r.id,d),S({title:"Order Updated",description:`Order ${r.id} has been successfully updated.`}),setTimeout(()=>k(null,null,function*(){const i=U.getState();i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500)}else{console.log("ðŸ“ Dialog: Handling ACTIVE order update for:",r.id);const d=N(p({},r),{customerName:a.deliveryName,status:a.status,deliveryNumber:a.deliveryNumber,company:a.company,site:a.site,driverName:a.driverName,phoneNumber:a.phoneNumber,tons:t,shift:a.shift,amount:t*100,signedDeliveryNote:a.signedDeliveryNote,orderType:a.orderType,date:a.orderDate,breakdown:{"8mm":parseFloat(a.breakdown["8mm"])||0,"10mm":parseFloat(a.breakdown["10mm"])||0,"12mm":parseFloat(a.breakdown["12mm"])||0,"14mm":parseFloat(a.breakdown["14mm"])||0,"16mm":parseFloat(a.breakdown["16mm"])||0,"18mm":parseFloat(a.breakdown["18mm"])||0,"20mm":parseFloat(a.breakdown["20mm"])||0,"25mm":parseFloat(a.breakdown["25mm"])||0,"32mm":parseFloat(a.breakdown["32mm"])||0}});if(a.status==="delivered")console.log("ðŸ“¤ Dialog: Active order marked as delivered, moving to history"),yield V.moveOrderToHistory(d),S({title:"Order Delivered",description:`Order ${r.id} has been marked as delivered and moved to history.`});else{console.log("ðŸ“ Dialog: Updating active order in place");const i={customer_name:a.deliveryName,delivery_number:a.deliveryNumber,company:a.company,site:a.site,driver_name:a.driverName,phone_number:a.phoneNumber,tons:t,shift:a.shift,amount:t*100,signed_delivery_note:a.signedDeliveryNote,order_type:a.orderType,date:a.orderDate,breakdown_8mm:parseFloat(a.breakdown["8mm"])||0,breakdown_10mm:parseFloat(a.breakdown["10mm"])||0,breakdown_12mm:parseFloat(a.breakdown["12mm"])||0,breakdown_14mm:parseFloat(a.breakdown["14mm"])||0,breakdown_16mm:parseFloat(a.breakdown["16mm"])||0,breakdown_18mm:parseFloat(a.breakdown["18mm"])||0,breakdown_20mm:parseFloat(a.breakdown["20mm"])||0,breakdown_25mm:parseFloat(a.breakdown["25mm"])||0,breakdown_32mm:parseFloat(a.breakdown["32mm"])||0};yield Fe.update(r.id,i),S({title:"Order Updated",description:`Order ${r.id} has been successfully updated.`})}setTimeout(()=>k(null,null,function*(){const i=U.getState();i.loadOrders&&(yield i.loadOrders()),a.status==="delivered"&&i.loadHistoryOrders&&(yield i.loadHistoryOrders())}),500)}g(!1)}catch(t){console.error("âŒ Dialog: Failed to update order:",t);const d=t instanceof Error?t.message:"Failed to update order. Please try again.";S({title:"Error",description:d,variant:"destructive"})}finally{f(!1)}});return r?e.jsx(Oe,{open:n,onOpenChange:o,children:e.jsxs(Te,{className:"sm:max-w-[700px] bg-background text-foreground max-h-[90vh] overflow-y-auto","aria-describedby":"order-details-description",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Me,{className:"text-foreground",children:["Order Details - ",c?r.delivery_number||r.id:r.deliveryNumber||r.id]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ce(r.status),ue(r.shift)]})]})}),e.jsx("div",{id:"order-details-description",className:"sr-only",children:"View and edit order information, steel breakdown, and delivery details."}),b?e.jsxs("form",{onSubmit:xe,className:"space-y-6",id:"edit-order-form",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-deliveryNumber",className:"text-foreground",children:"Delivery Number *"}),e.jsx(w,{id:"edit-deliveryNumber",name:"deliveryNumber",value:a.deliveryNumber,onChange:s=>u("deliveryNumber",s.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-deliveryName",className:"text-foreground",children:"Delivery Name *"}),e.jsx(w,{id:"edit-deliveryName",name:"deliveryName",value:a.deliveryName,onChange:s=>u("deliveryName",s.target.value),className:"bg-background text-foreground border-border"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-company",className:"text-foreground",children:"Company *"}),e.jsx(w,{id:"edit-company",name:"company",value:a.company,onChange:s=>u("company",s.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-site",className:"text-foreground",children:"Site *"}),e.jsx(w,{id:"edit-site",name:"site",value:a.site,onChange:s=>u("site",s.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-driverName",className:"text-foreground",children:"Driver Name"}),e.jsxs(I,{name:"driverName",value:a.driverName||"none",onValueChange:s=>{if(u("driverName",s==="none"?"":s),s!=="none"&&Array.isArray(C)){const d=C.find(i=>i&&i.name===s);d&&d.phone_number&&u("phoneNumber",d.phone_number)}},children:[e.jsx(P,{id:"edit-driverName",className:"bg-background text-foreground border-border",children:e.jsx($,{placeholder:"Select driver (optional)"})}),e.jsxs(B,{className:"bg-popover text-popover-foreground",children:[e.jsx(j,{value:"none",children:"No driver assigned"}),Array.isArray(C)&&C.map(s=>s&&s.id&&s.name?e.jsx(j,{value:s.name,children:s.name},s.id):null)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-phoneNumber",className:"text-foreground",children:"Phone Number"}),e.jsx(w,{id:"edit-phoneNumber",name:"phoneNumber",value:a.phoneNumber,onChange:s=>u("phoneNumber",s.target.value),placeholder:"+1 (555) 123-4567",className:"bg-background text-foreground border-border"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-order-date",className:"text-foreground",children:"Order Date *"}),e.jsx(w,{id:"edit-order-date",name:"orderDate",type:"date",value:a.orderDate,onChange:s=>u("orderDate",s.target.value),className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-tons",className:"text-foreground",children:"Total Tons *"}),e.jsx(w,{id:"edit-tons",name:"tons",type:"number",step:"0.1",value:a.tons,onChange:s=>u("tons",s.target.value),placeholder:"12.5",className:"bg-background text-foreground border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-shift",className:"text-foreground",children:"Shift"}),e.jsxs(I,{name:"shift",value:a.shift,onValueChange:s=>u("shift",s),children:[e.jsx(P,{id:"edit-shift",className:"bg-background text-foreground border-border",children:e.jsx($,{placeholder:"Select shift"})}),e.jsxs(B,{className:"bg-popover text-popover-foreground",children:[e.jsx(j,{value:"morning",children:"Morning Shift"}),e.jsx(j,{value:"night",children:"Night Shift"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-orderType",className:"text-foreground",children:"Order Type *"}),e.jsxs(I,{name:"orderType",value:a.orderType,onValueChange:s=>u("orderType",s),children:[e.jsx(P,{id:"edit-orderType",className:"bg-background text-foreground border-border",children:e.jsx($,{placeholder:"Select order type"})}),e.jsxs(B,{className:"bg-popover text-popover-foreground",children:[e.jsx(j,{value:"straight-bar",children:"Straight Bar"}),e.jsx(j,{value:"cut-and-bend",children:"Cut and Bend"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-status",className:"text-foreground",children:"Order Status"}),e.jsxs(I,{name:"status",value:a.status,onValueChange:s=>{console.log("ðŸ“Š Status change:",a.status,"â†’",s),u("status",s)},children:[e.jsx(P,{id:"edit-status",className:"bg-background text-foreground border-border",children:e.jsx($,{placeholder:"Select status"})}),e.jsxs(B,{className:"bg-popover text-popover-foreground",children:[e.jsx(j,{value:"in-progress",children:"In Progress"}),e.jsx(j,{value:"delivered",children:"Delivered"})]})]}),c&&a.status==="in-progress"&&e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:"âš ï¸ This will move the order back to today's active orders"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{id:"edit-signedDeliveryNote",checked:a.signedDeliveryNote,onCheckedChange:s=>u("signedDeliveryNote",s)}),e.jsx(h,{htmlFor:"edit-signedDeliveryNote",className:"text-foreground",children:"Signed Delivery Note Received"})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Steel Breakdown (Tons)"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",Object.values(a.breakdown).reduce((s,t)=>{const d=parseFloat(t)||0;return s+d},0).toFixed(2)," tons"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(a.breakdown).map(([s,t])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{htmlFor:`edit-breakdown-${s}`,className:"text-xs text-foreground",children:s}),e.jsx(Ee,{id:`edit-breakdown-${s}`,name:`edit-breakdown-${s}`,value:t,onChange:d=>ge(s,d),placeholder:"0.0 or =10+5",className:"bg-background text-foreground border-border text-sm h-8",step:"0.1"})]},s))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",disabled:v,onClick:()=>g(!1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsx(E,{type:"submit",disabled:v,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md",children:v?"Processing...":c&&a.status==="in-progress"?"Move to Active Orders":"Update Order"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Number"}),e.jsx("p",{className:"font-medium text-foreground",children:c?r.delivery_number||r.id:r.deliveryNumber||r.id})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r.status==="delivered"?"Delivered Date":"Order Date"}),e.jsx("p",{className:"font-medium text-foreground",children:he(r.deliveredAt||r.delivered_at,r.date)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Weight"}),e.jsxs("p",{className:"font-medium text-foreground",children:[r.tons," tons"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Shift"}),e.jsx("p",{className:"font-medium text-foreground",children:r.shift==="morning"?"Morning Shift":"Night Shift"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Type"}),e.jsx("p",{className:"font-medium text-foreground",children:(c?r.order_type:r.orderType)==="cut-and-bend"?"Cut and Bend":"Straight Bar"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Note"}),e.jsx("p",{className:"font-medium text-foreground",children:(c?r.signed_delivery_note:r.signedDeliveryNote)?e.jsx("span",{className:"text-success",children:"âœ“ Signed"}):e.jsx("span",{className:"text-muted-foreground",children:"Not Signed"})})]})]})]})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Name"}),e.jsx("p",{className:"font-medium text-foreground",children:c?r.customer_name:r.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Company"}),e.jsx("p",{className:"font-medium text-foreground",children:r.company||"N/A"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ze,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Site"}),e.jsx("p",{className:"font-medium text-foreground",children:r.site||"N/A"})]})]})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Steel Breakdown"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["8mm","10mm","12mm","14mm","16mm","18mm","20mm","25mm","32mm"].map(s=>{var d;let t=0;return c?t=Number(r[`breakdown_${s}`])||0:t=((d=r.breakdown)==null?void 0:d[s])||0,e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:s}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t>0?`${t} tons`:"0 tons"})]},s)})})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Driver Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Driver Name"}),e.jsx("p",{className:"font-medium text-foreground",children:c?r.driver_name||"N/A":r.driverName||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"}),e.jsx("div",{className:"font-medium",children:(()=>{const s=c?r.phone_number:r.phoneNumber;return s?e.jsx("a",{href:`tel:${s.replace(/[\s\-\(\)]/g,"")}`,className:"text-primary hover:text-primary/80 underline cursor-pointer",title:"Click to call",children:s}):e.jsx("span",{className:"text-muted-foreground",children:"N/A"})})()})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(E,{variant:"outline",onClick:()=>o(!1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"Close"}),le&&e.jsx(E,{onClick:()=>g(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Edit Order"})]})]})]})}):null}export{nr as E,ir as O,O as S};
