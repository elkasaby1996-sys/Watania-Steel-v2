import{r as y,j as n,I as F,d}from"./index-DrtJc57V.js";import{C}from"./calculator-ChZ83Mfv.js";function I({id:m,name:x,value:a,onChange:c,placeholder:f="0.0",className:h=""}){const[i,u]=y.useState(null),o=a.startsWith("="),g=t=>{try{const r=t.substring(1).trim();if(!/^[0-9+\-*/.() ]+$/.test(r))return null;if(r.includes("+"))return r.split("+").reduce((l,e)=>l+parseFloat(e.trim()),0);if(r.includes("*"))return r.split("*").reduce((l,e)=>l*parseFloat(e.trim()),1);if(r.includes("/")){const s=r.split("/");let l=parseFloat(s[0].trim());for(let e=1;e<s.length;e++)l/=parseFloat(s[e].trim());return l}if(r.includes("-")){const s=r.split("-");let l=parseFloat(s[0].trim());for(let e=1;e<s.length;e++)l-=parseFloat(s[e].trim());return l}return parseFloat(r)}catch(r){return null}},b=t=>{u(null),c(t)},p=()=>{if(o&&a.startsWith("=")){const t=g(a);t!==null?(c(t.toString()),u(null)):u("Invalid")}},j=t=>{t.key==="Enter"&&p(),t.key==="="&&!a.startsWith("=")&&(t.preventDefault(),c("="))};return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"relative",children:[n.jsx(F,{id:m,name:x,value:a,onChange:t=>b(t.target.value),onBlur:p,onKeyDown:j,placeholder:f,className:`${h} ${o?"border-blue-500":""} ${i?"border-red-500":""}`}),o&&n.jsx(C,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-blue-500"})]}),o&&a.length>1&&!i&&n.jsx(d,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Calculator mode"}),i&&n.jsx(d,{variant:"outline",className:"text-xs bg-red-50 text-red-700",children:i})]})}export{I as C};
