var Te=Object.defineProperty,Ce=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var me=(e,t,a)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,he=(e,t)=>{for(var a in t||(t={}))Ee.call(t,a)&&me(e,a,t[a]);if(de)for(var a of de(t))Le.call(t,a)&&me(e,a,t[a]);return e},fe=(e,t)=>Ce(e,Pe(t));var pe=(e,t,a)=>new Promise((r,i)=>{var o=d=>{try{u(a.next(d))}catch(f){i(f)}},l=d=>{try{u(a.throw(d))}catch(f){i(f)}},u=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,l);u((a=a.apply(e,t)).next())});import{k as w,J as ve,r as L,e as Be,j as n,B as ge,C as X,n as J,p as Q,t as Z,m as ee,L as ae,I as ye,o as Ie,i as Oe}from"./index-ma71H6Gv.js";import{S as Fe,a as Re,b as Me,c as $e,d as U}from"./select-DIwa_4rP.js";import{T as Ke,a as We,b as ne,c as re}from"./tabs-DCQNEJ-K.js";import{A as ze}from"./arrow-left-Dq_oDV5o.js";import{C as Ve}from"./calendar-CO-MNXG0.js";import{T as Ue}from"./trending-up-elEg1KNE.js";import{C as Ye}from"./calculator-DUrzhYkl.js";import{u as Ge,i as He,D as qe,f as Xe,E as Je,L as ie,a as q,b as Qe,A as Ze,c as Y,d as et,e as oe,g as tt,h as at,j as ke,G as nt,k as xe,l as rt,m as it,R as be,T as je,C as st}from"./generateCategoricalChart-C3nVHDpr.js";import{X as Se,Y as De,C as ot}from"./YAxis-BmHm4sGQ.js";import{P as lt,a as ct}from"./PieChart-D4uzeZ85.js";import"./index-BHnHYWBN.js";var ut=["type","layout","connectNulls","ref"];function V(e){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(e)}function dt(e,t){if(e==null)return{};var a=mt(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mt(e,t){if(e==null)return{};var a={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(a[i]=e[i]);return a}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(this,arguments)}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(a),!0).forEach(function(r){_(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function z(e){return vt(e)||pt(e)||ft(e)||ht()}function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ft(e,t){if(e){if(typeof e=="string")return le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return le(e,t)}}function pt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vt(e){if(Array.isArray(e))return le(e)}function le(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_e(r.key),r)}}function yt(e,t,a){return t&&we(e.prototype,t),a&&we(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function xt(e,t,a){return t=te(t),bt(e,Ne()?Reflect.construct(t,a||[],te(e).constructor):t.apply(e,a))}function bt(e,t){if(t&&(V(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ne=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},te(e)}function F(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ce(e,t)}function _(e,t,a){return t=_e(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _e(e){var t=At(e,"string");return V(t)=="symbol"?t:String(t)}function At(e,t){if(V(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(V(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H=function(e){jt(t,e);function t(){var a;gt(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=xt(this,t,[].concat(i)),_(F(a),"state",{isAnimationFinished:!0,totalLength:0}),_(F(a),"generateSimpleStrokeDasharray",function(l,u){return"".concat(u,"px ").concat(l-u,"px")}),_(F(a),"getStrokeDasharray",function(l,u,d){var f=d.reduce(function(j,k){return j+k});if(!f)return a.generateSimpleStrokeDasharray(u,l);for(var y=Math.floor(l/f),v=l%f,p=u-l,g=[],h=0,b=0;h<d.length;b+=d[h],++h)if(b+d[h]>v){g=[].concat(z(d.slice(0,h)),[v-b]);break}var D=g.length%2===0?[0,p]:[p];return[].concat(z(t.repeat(d,y)),z(g),D).map(function(j){return"".concat(j,"px")}).join(", ")}),_(F(a),"id",Ge("recharts-line-")),_(F(a),"pathRef",function(l){a.mainCurve=l}),_(F(a),"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),_(F(a),"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return yt(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch(i){return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.points,u=o.xAxis,d=o.yAxis,f=o.layout,y=o.children,v=Xe(y,Je);if(!v)return null;var p=function(b,D){return{x:b.x,y:b.y,value:b.value,errorVal:ke(b.payload,D)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return w.createElement(ie,g,v.map(function(h){return w.cloneElement(h,{key:"bar-".concat(h.props.dataKey),data:l,xAxis:u,yAxis:d,layout:f,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,o){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var u=this.props,d=u.dot,f=u.points,y=u.dataKey,v=q(this.props,!1),p=q(d,!0),g=f.map(function(b,D){var j=S(S(S({key:"dot-".concat(D),r:3},v),p),{},{value:b.value,dataKey:y,cx:b.x,cy:b.y,index:D,payload:b.payload});return t.renderDotItem(d,j)}),h={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return w.createElement(ie,G({className:"recharts-line-dots",key:"dots"},h),g)}},{key:"renderCurveStatically",value:function(r,i,o,l){var u=this.props,d=u.type,f=u.layout,y=u.connectNulls;u.ref;var v=dt(u,ut),p=S(S(S({},q(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},l),{},{type:d,layout:f,connectNulls:y});return w.createElement(Qe,G({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,l=this.props,u=l.points,d=l.strokeDasharray,f=l.isAnimationActive,y=l.animationBegin,v=l.animationDuration,p=l.animationEasing,g=l.animationId,h=l.animateNewValues,b=l.width,D=l.height,j=this.state,k=j.prevPoints,T=j.totalLength;return w.createElement(Ze,{begin:y,duration:v,isActive:f,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var N=C.t;if(k){var B=k.length/u.length,P=u.map(function(A,R){var M=Math.floor(R*B);if(k[M]){var $=k[M],s=Y($.x,A.x),m=Y($.y,A.y);return S(S({},A),{},{x:s(N),y:m(N)})}if(h){var x=Y(b*2,A.x),O=Y(D/2,A.y);return S(S({},A),{},{x:x(N),y:O(N)})}return S(S({},A),{},{x:A.x,y:A.y})});return o.renderCurveStatically(P,r,i)}var I=Y(0,T),E=I(N),K;if(d){var W="".concat(d).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});K=o.getStrokeDasharray(E,T,W)}else K=o.generateSimpleStrokeDasharray(T,E);return o.renderCurveStatically(u,r,i,{strokeDasharray:K})})}},{key:"renderCurve",value:function(r,i){var o=this.props,l=o.points,u=o.isAnimationActive,d=this.state,f=d.prevPoints,y=d.totalLength;return u&&l&&l.length&&(!f&&y>0||!et(f,l))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(l,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,l=i.dot,u=i.points,d=i.className,f=i.xAxis,y=i.yAxis,v=i.top,p=i.left,g=i.width,h=i.height,b=i.isAnimationActive,D=i.id;if(o||!u||!u.length)return null;var j=this.state.isAnimationFinished,k=u.length===1,T=ve("recharts-line",d),C=f&&f.allowDataOverflow,N=y&&y.allowDataOverflow,B=C||N,P=oe(D)?this.id:D,I=(r=q(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=I.r,K=E===void 0?3:E,W=I.strokeWidth,A=W===void 0?2:W,R=tt(l)?l:{},M=R.clipDot,$=M===void 0?!0:M,s=K*2+A;return w.createElement(ie,{className:T},C||N?w.createElement("defs",null,w.createElement("clipPath",{id:"clipPath-".concat(P)},w.createElement("rect",{x:C?p:p-g/2,y:N?v:v-h/2,width:C?g:g*2,height:N?h:h*2})),!$&&w.createElement("clipPath",{id:"clipPath-dots-".concat(P)},w.createElement("rect",{x:p-s/2,y:v-s/2,width:g+s,height:h+s}))):null,!k&&this.renderCurve(B,P),this.renderErrorBar(B,P),(k||l)&&this.renderDots(B,$,P),(!b||j)&&at.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(z(r),[0]):r,l=[],u=0;u<i;++u)l=[].concat(z(l),z(o));return l}},{key:"renderDotItem",value:function(r,i){var o;if(w.isValidElement(r))o=w.cloneElement(r,i);else if(He(r))o=r(i);else{var l=ve("recharts-line-dot",typeof r!="boolean"?r.className:"");o=w.createElement(qe,G({},i,{className:l}))}return o}}]),t}(L.PureComponent);_(H,"displayName","Line");_(H,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!nt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_(H,"getComposedData",function(e){var t=e.props,a=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.dataKey,u=e.bandSize,d=e.displayedData,f=e.offset,y=t.layout,v=d.map(function(p,g){var h=ke(p,l);return y==="horizontal"?{x:xe({axis:a,ticks:i,bandSize:u,entry:p,index:g}),y:oe(h)?null:r.scale(h),value:h,payload:p}:{x:oe(h)?null:a.scale(h),y:xe({axis:r,ticks:o,bandSize:u,entry:p,index:g}),value:h,payload:p}});return S({points:v,layout:y},f)});var wt=rt({chartName:"LineChart",GraphicalChild:H,axisComponents:[{axisType:"xAxis",AxisComp:Se},{axisType:"yAxis",AxisComp:De}],formatAxisMap:it});function Ot(){const e=Be(),[t,a]=L.useState([]),[r,i]=L.useState([]),[o,l]=L.useState(!0),[u,d]=L.useState(""),[f,y]=L.useState(""),[v,p]=L.useState("monthly"),[g,h]=L.useState("all");L.useEffect(()=>{pe(null,null,function*(){l(!0);try{const[m,x]=yield Promise.all([Ie.getAll(),Oe.getAll()]),O=m.map(c=>({id:c.id,customerName:c.customer_name,date:c.date,status:c.status,amount:c.amount,tons:c.tons,shift:c.shift,deliveryNumber:c.delivery_number,company:c.company,site:c.site,driverName:c.driver_name,phoneNumber:c.phone_number,deliveredAt:c.delivered_at,signedDeliveryNote:c.signed_delivery_note,orderType:c.order_type,breakdown:{"8mm":c.breakdown_8mm||0,"10mm":c.breakdown_10mm||0,"12mm":c.breakdown_12mm||0,"14mm":c.breakdown_14mm||0,"16mm":c.breakdown_16mm||0,"18mm":c.breakdown_18mm||0,"20mm":c.breakdown_20mm||0,"25mm":c.breakdown_25mm||0,"32mm":c.breakdown_32mm||0}})),ue=x.map(c=>({id:c.id,customerName:c.customer_name,date:c.date,status:c.status,amount:c.amount,tons:c.tons,shift:c.shift,deliveryNumber:c.delivery_number,company:c.company,site:c.site,driverName:c.driver_name,phoneNumber:c.phone_number,deliveredAt:c.delivered_at,signedDeliveryNote:c.signed_delivery_note,orderType:c.order_type,breakdown:{"8mm":c.breakdown_8mm||0,"10mm":c.breakdown_10mm||0,"12mm":c.breakdown_12mm||0,"14mm":c.breakdown_14mm||0,"16mm":c.breakdown_16mm||0,"18mm":c.breakdown_18mm||0,"20mm":c.breakdown_20mm||0,"25mm":c.breakdown_25mm||0,"32mm":c.breakdown_32mm||0}}));a(O),i(ue)}catch(m){console.error("Failed to fetch steel analytics data:",m)}finally{l(!1)}})},[]);const b=[...t,...r],j=(()=>{const s=new Date;let m="",x=s.toISOString().split("T")[0];switch(v){case"daily":m=x;break;case"weekly":m=new Date(s.getTime()-7*24*60*60*1e3).toISOString().split("T")[0];break;case"monthly":m=new Date(s.getFullYear(),s.getMonth()-1,s.getDate()).toISOString().split("T")[0];break;case"six-months":m=new Date(s.getFullYear(),s.getMonth()-6,s.getDate()).toISOString().split("T")[0];break;case"custom":m=u,x=f;break}return{start:m,end:x}})(),k=b.filter(s=>{if(!(s.breakdown&&Object.values(s.breakdown).some(O=>O>0)))return!1;const x=s.date;return!(j.start&&x<j.start||j.end&&x>j.end||g==="straight-bar"&&s.orderType!=="straight-bar"||g==="cut-and-bend"&&s.orderType!=="cut-and-bend")}),T=k.reduce((s,m)=>{const x=m.date;return s[x]||(s[x]=0),s[x]+=m.tons||0,s},{}),C=Object.entries(T).map(([s,m])=>({date:new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),tons:Math.round(m*100)/100,fullDate:s})).sort((s,m)=>new Date(s.fullDate).getTime()-new Date(m.fullDate).getTime()),N=k.filter(s=>s.breakdown).reduce((s,m)=>(m.breakdown&&Object.entries(m.breakdown).forEach(([x,O])=>{s[x]||(s[x]=0),s[x]+=O||0}),s),{}),B=Object.entries(N).map(([s,m])=>({name:s,value:Math.round(m*100)/100,tons:Math.round(m*100)/100})).filter(s=>s.value>0).sort((s,m)=>parseInt(s.name)-parseInt(m.name)),P=B.reduce((s,m)=>s+m.value,0),I=B.map(s=>fe(he({},s),{percentage:P>0?Math.round(s.value/P*100):0})),E=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff","#00ffff","#ff0000","#0000ff"],W=Object.values(T).reduce((m,x)=>m+x,0),A=Object.values(T).reduce((s,m)=>s+m,0),R=Object.keys(T).length,M=R>0?A/R:0,$=()=>{d(""),y(""),p("monthly")};return o?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading steel analytics data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(ge,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"text-foreground hover:bg-accent",children:[n.jsx(ze,{size:16}),"Back to Dashboard"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-headline font-bold text-foreground",children:"Steel Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"Detailed breakdown and analysis of steel bar usage"})]})]}),n.jsxs(X,{children:[n.jsxs(J,{children:[n.jsxs(Q,{className:"flex items-center gap-2",children:[n.jsx(Ve,{className:"h-5 w-5"}),"Time Range Configuration"]}),n.jsx(Z,{children:"Configure the time period for steel analytics"})]}),n.jsxs(ee,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ae,{htmlFor:"time-range",children:"Time Range"}),n.jsxs(Fe,{value:v,onValueChange:s=>p(s),children:[n.jsx(Re,{id:"time-range",className:"bg-background text-foreground border-border",children:n.jsx(Me,{placeholder:"Select time range"})}),n.jsxs($e,{className:"bg-popover text-popover-foreground",children:[n.jsx(U,{value:"daily",children:"Today"}),n.jsx(U,{value:"weekly",children:"Last 7 Days"}),n.jsx(U,{value:"monthly",children:"Last 30 Days"}),n.jsx(U,{value:"six-months",children:"Last 6 Months"}),n.jsx(U,{value:"custom",children:"Custom Range"})]})]})]}),v==="custom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ae,{htmlFor:"start-date",children:"Start Date"}),n.jsx(ye,{id:"start-date",type:"date",value:u,onChange:s=>d(s.target.value),className:"bg-background text-foreground border-border"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ae,{htmlFor:"end-date",children:"End Date"}),n.jsx(ye,{id:"end-date",type:"date",value:f,onChange:s=>y(s.target.value),className:"bg-background text-foreground border-border"})]})]}),n.jsx(ge,{onClick:$,variant:"outline",className:"h-9",children:"Reset"})]}),n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("p",{className:"text-sm text-blue-800",children:["Analyzing: ",j.start||"All time"," to ",j.end||"Present","(",k.length," orders with steel breakdown data)"]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Fetched directly from Supabase: ",t.length," active orders + ",r.length," history orders"]})]})]})]}),n.jsxs(X,{children:[n.jsxs(J,{children:[n.jsxs(Q,{className:"flex items-center gap-2",children:[n.jsx(Ue,{className:"h-5 w-5"}),"Monthly Average"]}),n.jsx(Z,{children:"Total steel delivered in the selected period (up-to-date data only)"})]}),n.jsx(ee,{children:n.jsxs("div",{className:"text-center p-6",children:[n.jsx("div",{className:"p-4 bg-primary/10 rounded-full w-fit mx-auto mb-4",children:n.jsx(Ye,{className:"h-12 w-12 text-primary"})}),n.jsx("p",{className:"text-4xl font-bold text-foreground mb-2",children:Math.round(W*100)/100}),n.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"tons total"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Daily Average"}),n.jsxs("p",{className:"font-semibold text-foreground",children:[Math.round(M*100)/100," tons"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Active Days"}),n.jsxs("p",{className:"font-semibold text-foreground",children:[R," days"]})]})]})]})})]}),n.jsxs(Ke,{value:g,onValueChange:s=>h(s),className:"w-full",children:[n.jsxs(We,{className:"grid w-full grid-cols-3",children:[n.jsx(ne,{value:"all",children:"Total Cut-and-Bend and Straight Bar"}),n.jsx(ne,{value:"straight-bar",children:"Straight Bar Only"}),n.jsx(ne,{value:"cut-and-bend",children:"Cut-and-Bend Only"})]}),n.jsx(re,{value:"all",className:"mt-6",children:n.jsx(se,{lineChartData:C,pieChartDataWithPercentages:I,COLORS:E,tabTitle:"Total Steel Analytics",tabDescription:"Combined data for both Cut-and-Bend and Straight Bar orders"})}),n.jsx(re,{value:"straight-bar",className:"mt-6",children:n.jsx(se,{lineChartData:C,pieChartDataWithPercentages:I,COLORS:E,tabTitle:"Straight Bar Analytics",tabDescription:"Data for Straight Bar orders only"})}),n.jsx(re,{value:"cut-and-bend",className:"mt-6",children:n.jsx(se,{lineChartData:C,pieChartDataWithPercentages:I,COLORS:E,tabTitle:"Cut-and-Bend Analytics",tabDescription:"Data for Cut-and-Bend orders only"})})]})]})}function se({lineChartData:e,pieChartDataWithPercentages:t,COLORS:a,tabTitle:r,tabDescription:i}){return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(X,{children:[n.jsxs(J,{children:[n.jsxs(Q,{children:["Tons vs Time - ",r]}),n.jsxs(Z,{children:[i," - Order date based trends"]})]}),n.jsx(ee,{children:n.jsx("div",{className:"h-80",children:n.jsx(be,{width:"100%",height:"100%",children:n.jsxs(wt,{data:e,children:[n.jsx(ot,{strokeDasharray:"3 3",stroke:"hsl(240, 4%, 80%)"}),n.jsx(Se,{dataKey:"date",stroke:"hsl(240, 4%, 52%)",fontSize:12}),n.jsx(De,{stroke:"hsl(240, 4%, 52%)",fontSize:12,label:{value:"Tons",angle:-90,position:"insideLeft"}}),n.jsx(je,{contentStyle:{backgroundColor:"hsl(0, 0%, 100%)",border:"1px solid hsl(240, 4%, 80%)",borderRadius:"8px",color:"hsl(0, 0%, 12%)"},formatter:o=>[`${o} tons`,"Total Delivered"]}),n.jsx(H,{type:"monotone",dataKey:"tons",stroke:"hsl(340, 80%, 30%)",strokeWidth:3,dot:{fill:"hsl(340, 80%, 30%)",strokeWidth:2,r:4},activeDot:{r:6,fill:"hsl(340, 80%, 30%)"}})]})})})})]}),n.jsxs(X,{children:[n.jsxs(J,{children:[n.jsxs(Q,{children:["Steel Size Distribution - ",r]}),n.jsxs(Z,{children:[i," - Breakdown by steel bar diameter"]})]}),n.jsxs(ee,{children:[n.jsx("div",{className:"h-80",children:n.jsx(be,{width:"100%",height:"100%",children:n.jsxs(lt,{children:[n.jsx(ct,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:t.map((o,l)=>n.jsx(st,{fill:a[l%a.length]},`cell-${l}`))}),n.jsx(je,{contentStyle:{backgroundColor:"hsl(0, 0%, 100%)",border:"1px solid hsl(240, 4%, 80%)",borderRadius:"8px",color:"hsl(0, 0%, 12%)"},formatter:(o,l,u)=>[`${u.payload.name} ${u.payload.percentage}%`,""],labelFormatter:()=>""})]})})}),n.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2",children:t.map((o,l)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a[l%a.length]}}),n.jsxs("span",{className:"text-foreground",children:[o.name,": ",o.tons,"t (",o.percentage,"%)"]})]},o.name))})]})]})]})})}export{Ot as SteelAnalytics};
